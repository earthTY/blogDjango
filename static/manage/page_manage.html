<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    {% include "./include/head.html" %}
    <style>
        .demo-upload-list {
            display: inline-block;
            width: 60px;
            height: 60px;
            text-align: center;
            line-height: 60px;
            border: 1px solid transparent;
            border-radius: 4px;
            overflow: hidden;
            background: #fff;
            position: relative;
            box-shadow: 0 1px 1px rgba(0, 0, 0, .2);
            margin-right: 4px;
        }

        .demo-upload-list img {
            width: 100%;
            height: 100%;
        }

        .demo-upload-list-cover {
            display: none;
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, .6);
        }

        .demo-upload-list:hover .demo-upload-list-cover {
            display: block;
        }

        .demo-upload-list-cover i {
            color: #fff;
            font-size: 20px;
            cursor: pointer;
            margin: 0 2px;
        }

        .ivu-select-multiple .ivu-select-selection{
            max-height: 100px;
            overflow: auto;
        }

        .ivu-poptip-popper{
            min-width: auto;
        }
    </style>
</head>
<body>
<div id="value_container" v-cloak>
    <div id="wrapper">
        <view-header></view-header>
        <view-navigation current_page="page_manage"></view-navigation>
        <div id="page-wrapper">
            <div id="page-inner">
                <main class="">
                    <div class="row">
                        <div class="col-md-12">
                            <ol class="breadcrumb">
                                <li><a href="">页面管理</a></li>
                                <li class="active">页面上新</li>
                            </ol>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <!-- Advanced Tables -->
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    页面列表
                                    <a class="btn btn-success" @click="openPageOnlineView"
                                       style="float: right">页面上新</a>
                                </div>
                                <div class="panel-heading">
                                    <form style="border-radius:5px;border:1px dashed rgb(194, 194, 194);padding: 10px;" class="form-inline">
                                        <div class="form-group">
                                            <label for="start_date">开始时间</label>
                                            <input type="text" class="form-control" id="start_date" placeholder=""
                                                   v-model="start_time" readonly>
                                        </div>
                                        <div class="form-group">
                                            <label for="end_date">结束时间</label>
                                            <input type="text" class="form-control" id="end_date" placeholder=""
                                                   v-model="end_time" readonly>
                                        </div>
                                        <div class="form-group">
                                            <label for="end_date">订单状态</label>
                                            <select class="form-control" v-model="status">
                                                <option value="-1">全部</option>
                                                <option value="0">未发布</option>
                                                <option value="1">已发布</option>
                                                <option value="2">已下架</option>
                                            </select>
                                        </div>
                                        <button class="btn btn-info" type="button" @click="Search(true,0)">搜索</button>
                                    </form>
                                    <form style="border-radius:5px;border:1px dashed rgb(194, 194, 194);padding: 10px;margin-top: 20px" class="form-inline">
                                        <div class="form-group">
                                            <label>产品编号</label>
                                            <div  style="display: inline-block;width: 200px">
                                                <i-select filterable v-model="product_number">
                                                    <i-option v-for="val in product_number_list_info" :value="val.product_number">[[val.product_number]] - [[val.item_bar]]</i-option>
                                                </i-select>
                                            </div>
                                        </div>
                                        <button class="btn btn-info" type="button" @click="Search(true,1)">搜索</button>
                                    </form>
                                </div>
                                <div class="panel-body">
                                    <div class="">
                                        <div id="dataTables-example_wrapper" class="dataTables_wrapper form-inline"
                                             role="grid">
                                            <div class="table_group">
                                                <table class="table table-striped table-bordered table-hover dataTable no-footer"
                                                        aria-describedby="dataTables-example_info">
                                                    <thead>
                                                    <tr role="row">
                                                        <th class="sorting_asc">序号</th>
                                                        <th class="sorting">产品编号</th>
                                                        <th class="sorting">产品名称</th>
                                                        <th class="sorting">链接名称</th>
                                                        <th class="sorting">页面标题</th>
                                                        <th class="sorting">发布状态</th>
                                                        <th class="sorting">操作</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody>
                                                    <tr class="gradeA odd" v-for="(item,index) in online_page_list">
                                                        <td class="sorting_1">[[item.No]]</td>
                                                        <td class=" ">[[item.product_number]]</td>
                                                        <td class=" ">[[item.item_bar]]</td>
                                                        <td class="">[[item.name]]</td>
                                                        <td class="">
                                                            <!--<a :href="'/'+item.link_url" target="_blank">[[item.title]]</a>-->

                                                            <Poptip  placement="right">
                                                                <i-button size="small">[[item.title]]</i-button>
                                                                <div slot="content">
                                                                    <a :href="'/'+item.link_url+'-preview?cf='" target="_blank">页面预览</a>
                                                                    <a style="margin-left: 15px" v-show="item.status == 1" :href="'/'+item.link_url+'?cf='" target="_blank">页面查看</a>
                                                                </div>
                                                            </Poptip >
                                                        </td>
                                                        <td class="">
                                                            <span class="label label-danger" v-if="item.status == 0"> 未发布 </span>
                                                            <span class="label label-success" v-if="item.status == 1"> 已发布 </span>
                                                            <span class="label label-default" v-if="item.status == 2"> 已下架 </span>
                                                        </td>
                                                        <td class="center ">
                                                            <a @click="openModifyPageView(item)" style="cursor: pointer;">页面修改</a>
                                                            <a @click="pagePublishOrStop(item,1,index)" style="cursor: pointer;">[[item.status == 1 ? "重新发布" : "发布"]]</a>
                                                            <a v-if="item.status == 1" @click="pagePublishOrStop(item,0,index)" style="cursor: pointer;">取消发布</a>
                                                            <a v-if="item.status != 2" @click="pagePublishOrStop(item,2,index)" style="cursor: pointer;">下架</a>
                                                        </td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <div class="row">
                                                <div class="col-sm-12" style="position: relative;z-index: 10;">
                                                    <div class="dataTables_length" id="dataTables-example_length">
                                                        <label style="float: right;">
                                                            <select name="dataTables-example_length"
                                                                    aria-controls="dataTables-example"
                                                                    class="form-control input-sm" v-model="count">
                                                                <option value="10">10</option>
                                                                <option value="25">25</option>
                                                                <option value="50">50</option>
                                                                <option value="100">100</option>
                                                            </select> 行/每页
                                                        </label>
                                                        <div class="dataTables_info" id="dataTables-example_info"
                                                             role="alert"
                                                             aria-live="polite" aria-relevant="all">共[[total]]条
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-sm-12">
                                                    <div class="dataTables_paginate paging_simple_numbers"
                                                         id="dataTables-example_paginate" style="text-align: center;">
                                                        <ul class="pagination">
                                                            <li class="paginate_button previous"
                                                                :class="{disabled:(start/count)==0}"><a
                                                                    @click="goToPage(start/count)">上一页</a></li>
                                                        </ul>
                                                        <ul id="pagination" class="pagination">
                                                            <li class="paginate_button active"><a>1</a></li>
                                                        </ul>
                                                        <ul class="pagination">
                                                            <li class="paginate_button previous"
                                                                :class="{disabled:((start/count)+1)==Math.ceil(total / count) || total==0}">
                                                                <a @click="goToPage((start/count)+2)">下一页</a></li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                            <!--End Advanced Tables -->
                        </div>
                    </div>
                    <div class="modal fade" id="page_online" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                         aria-hidden="true">
                        <div class="modal-dialog  modal-lg">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;
                                    </button>
                                    <h4 class="modal-title" id="myModalLabel">页面上新</h4>
                                </div>
                                <div class="modal-body">
                                    <form role="form">
                                        <Row type="flex" justify="space-between">
                                            <i-col span="7">
                                                <div class="form-group">
                                                    <label>链接名称</label>
                                                    <i-input class="" v-model.trim="page_online.name"
                                                           placeholder="必填，链接名称"></i-input>
                                                </div>
                                            </i-col>
                                            <i-col span="7">
                                                <div class="form-group">
                                                    <label>产品编号</label>
                                                    <i-input class="" v-model.trim="page_online.product_number"
                                                           placeholder="编号范围:ecsp1002000 ~ ecsp1003000"></i-input>
                                                </div>
                                            </i-col>
                                            <i-col span="7">
                                                <div class="form-group">
                                                    <label>页面标题</label>
                                                    <i-input class="" v-model.trim="page_online.title"
                                                           placeholder="必填，页面标题"></i-input>
                                                </div>
                                            </i-col>
                                        </Row>

                                        <Row type="flex" justify="space-between">

                                            <i-col span="11">
                                                <div class="form-group">
                                                    <label>产品名称</label>
                                                    <i-input class="" v-model.trim="page_online.item_bar"
                                                           placeholder="必填，产品名称"></i-input>
                                                </div>
                                            </i-col>
                                            <i-col span="11">
                                                <div class="form-group">
                                                    <label>折扣标语</label>
                                                    <i-input class="" v-model.trim="page_online.discount"
                                                           placeholder="两件7折,三件5折"></i-input>
                                                </div>
                                            </i-col>
                                        </Row>

                                        <Row type="flex" justify="space-between">
                                            <i-col span="11">
                                                <div class="form-group">
                                                    <label>原价</label>
                                                    <i-input class="" v-model.trim="page_online.price_old"
                                                           placeholder="必填，原价 - 1098"></i-input>
                                                </div>
                                            </i-col>
                                            <i-col span="11">
                                                <div class="form-group">
                                                    <label>促销价</label>
                                                    <i-input class="" v-model.trim="page_online.price_now"
                                                           placeholder="必填，促销价 - 799"></i-input>
                                                </div>
                                            </i-col>
                                        </Row>

                                        <Row type="flex" justify="space-between">
                                            <i-col span="11">
                                                <div class="form-group">
                                                    <label>两件折扣</label>
                                                    <i-input class="" type="number" step="0.05" max="1" min="0" v-model.trim="page_online.discount_2_price_code"
                                                           placeholder="必填，两件折扣 - 0.75"></i-input>
                                                </div>
                                            </i-col>
                                            <i-col span="11">
                                                <div class="form-group">
                                                    <label>三件以上折扣</label>
                                                    <i-input class="" type="number" step="0.05" max="1" min="0" v-model.trim="page_online.discount_3_price_code"
                                                           placeholder="必填，三件以上折扣 - 0.5"></i-input>
                                                </div>
                                            </i-col>
                                        </Row>

                                        <!--banner图-->
                                        <div class="form-group">
                                            <label>页面banner图</label>
                                            <div>
                                                <draggable v-model="page_online.banner_info.imgList" @start="drag=true" @end="drag=false">
                                                    <div class="demo-upload-list"
                                                     v-for="(item,index in page_online.banner_info.imgList">
                                                    <template v-if="item.status === 'finished'">
                                                        <img :src="item.url">
                                                        <div class="demo-upload-list-cover">
                                                            <Icon v-show="index != 0" type="android-arrow-up"
                                                                  @click.native="prevImgPos(true,'banner_info',index)"></Icon>
                                                            <Icon type="ios-trash-outline"
                                                                  @click.native="handleRemoveBanner(index)"></Icon>
                                                            <Icon v-show="index != (page_online.banner_info.imgList.length - 1)" type="android-arrow-down"
                                                                  @click.native="nextImgPos(true,'banner_info',index)"></Icon>
                                                        </div>
                                                    </template>
                                                    <template v-else>
                                                        <Progress v-if="item.showProgress" :percent="item.percentage"
                                                                  hide-info></Progress>
                                                    </template>
                                                </div>
                                                </draggable>
                                                <div>

                                                    <Row>
                                                        <i-col :sm="4">
                                                            <Upload
                                                                    :show-upload-list="false"
                                                                    :on-success="handleSuccessBanner"
                                                                    :format="['jpg','jpeg','png','gif']"
                                                                    :max-size="2048"
                                                                    multiple
                                                                    action="/upload_img">
                                                                <i-button>本地上传</i-button>
                                                            </Upload>
                                                        </i-col>
                                                        <i-col :sm="12">
                                                            <div class="input-group">
                                                                <input type="text" class="form-control">
                                                                <span class="input-group-addon" @click="handleGetUrlImage($event,'banner')">外链图片</span>
                                                            </div>
                                                        </i-col>
                                                    </Row>

                                                </div>
                                            </div>
                                        </div>

                                        <!--详情图-->
                                        <div class="form-group">
                                            <label>页面详情图</label>
                                            <div>
                                                <draggable v-model="page_online.detail_info.imgList" @start="drag=true" @end="drag=false">
                                                    <div class="demo-upload-list"
                                                     v-for="(item,index) in page_online.detail_info.imgList">
                                                    <template v-if="item.status === 'finished'">
                                                        <img :src="item.url">
                                                        <div class="demo-upload-list-cover">
                                                            <Icon v-show="index != 0" type="android-arrow-up"
                                                                  @click.native="prevImgPos(true,'detail_info',index)"></Icon>
                                                            <Icon type="ios-trash-outline"
                                                                  @click.native="handleRemoveDetail(index)"></Icon>
                                                            <Icon v-show="index != (page_online.detail_info.imgList.length - 1)" type="android-arrow-down"
                                                                  @click.native="nextImgPos(true,'detail_info',index)"></Icon>
                                                        </div>
                                                    </template>
                                                </div>
                                                </draggable>
                                                <div>

                                                    <Row>
                                                        <i-col :sm='4'>
                                                            <Upload
                                                                    :show-upload-list="false"
                                                                    :on-success="handleSuccessDetail"
                                                                    :format="['jpg','jpeg','png','gif']"
                                                                    :max-size="2048"
                                                                    action="/upload_img">
                                                                <i-button>本地上传</i-button>
                                                            </Upload>
                                                        </i-col>
                                                        <i-col :sm="12">
                                                            <div class="input-group">
                                                                <input type="text" class="form-control">
                                                                <span class="input-group-addon" @click="handleGetUrlImage($event,'detail')">外链图片</span>
                                                            </div>
                                                        </i-col>
                                                    </Row>

                                                </div>
                                            </div>
                                        </div>

                                        <!--参数图-->
                                        <div class="form-group">
                                            <label>页面参数图</label>
                                            <div>
                                                <draggable v-model="page_online.parameter_info.imgList" @start="drag=true" @end="drag=false">
                                                    <div class="demo-upload-list"
                                                     v-for="(item,index) in page_online.parameter_info.imgList">
                                                    <template v-if="item.status === 'finished'">
                                                        <img :src="item.url">
                                                        <div class="demo-upload-list-cover">
                                                            <Icon v-show="index != 0" type="android-arrow-up"
                                                                  @click.native="prevImgPos(true,'parameter_info',index)"></Icon>
                                                            <Icon type="ios-trash-outline"
                                                                  @click.native="handleRemoveParameter(index)"></Icon>
                                                            <Icon v-show="index != (page_online.parameter_info.imgList.length - 1)" type="android-arrow-down"
                                                                  @click.native="nextImgPos(true,'parameter_info',index)"></Icon>
                                                        </div>
                                                    </template>
                                                </div>
                                                </draggable>
                                                <div>
                                                    <Row>
                                                        <i-col :sm='4'>
                                                            <Upload
                                                                    :show-upload-list="false"
                                                                    :on-success="handleSuccessParameter"
                                                                    :format="['jpg','jpeg','png','gif']"
                                                                    :max-size="2048"
                                                                    action="/upload_img">
                                                                <i-button>本地上传</i-button>
                                                            </Upload>
                                                        </i-col>
                                                        <i-col :sm="12">
                                                            <div class="input-group">
                                                                <input type="text" class="form-control">
                                                                <span class="input-group-addon" @click="handleGetUrlImage($event,'parameter')">外链图片</span>
                                                            </div>
                                                        </i-col>
                                                    </Row>

                                                </div>
                                            </div>
                                        </div>

                                        <!--评论信息-->
                                        <div class="form-group">
                                            <div>
                                                <label>评论信息</label>
                                            </div>

                                            <div v-for="(item,detailPos) in page_online.comments_info"
                                                 style="padding: 10px;margin-top:10px;border:1px dashed #c2c2c2;border-radius: 5px">

                                                <Row type="flex" justify="space-between">
                                                    <i-col span="9">
                                                        <label>用户名</label>
                                                        <i-input v-model.trim="item.user_name" type="text"
                                                                 placeholder="Enter something..."></i-input>
                                                    </i-col>
                                                    <i-col span="9">
                                                        <label>评论信息</label>
                                                        <i-input v-model.trim="item.user_comment" type="text"
                                                                 placeholder="Enter something..."></i-input>
                                                    </i-col>
                                                    <i-col span="4">
                                                        <label>好评分数</label>
                                                        <div>
                                                            <label><input type="radio" v-model.trim="item.is_best" :value="true"/> 五星</label>
                                                            <label><input type="radio" v-model.trim="item.is_best" :value="false"/> 四星半</label>
                                                        </div>
                                                    </i-col>
                                                </Row>
                                                <div style="margin-top: 10px;">

                                                    <!--<label>图片名称</label>-->
                                                    <!--<i-input v-model="line.img_title" type="text"></i-input>-->
                                                    <draggable v-model="item.imgList" @start="drag=true" @end="drag=false">
                                                        <div style="margin-top: 10px;" class="demo-upload-list"
                                                         v-for="(objImg,imgPos) in item.imgList">
                                                        <template v-if="objImg.status === 'finished'">
                                                            <img :src="objImg.url">
                                                            <div class="demo-upload-list-cover">
                                                                <Icon v-show="imgPos != 0" type="android-arrow-up"
                                                                      @click.native="prevImgPos(true,'comments_info',imgPos,detailPos)"></Icon>
                                                                <Icon type="ios-trash-outline"
                                                                      @click.native="handleRemoveIntroduction(detailPos,imgPos,detailPos)"></Icon>
                                                                <Icon v-show="imgPos != (item.imgList.length - 1)" type="android-arrow-down"
                                                                      @click.native="nextImgPos(true,'comments_info',imgPos,detailPos)"></Icon>
                                                            </div>
                                                        </template>
                                                    </div>
                                                    </draggable>
                                                    <div style="margin-top: 10px;">
                                                        <Row>
                                                            <i-col :sm="4">
                                                                <Upload
                                                                        :show-upload-list="false"
                                                                        :on-success="handleSuccessIntroduction"
                                                                        :format="['jpg','jpeg','png','gif']"
                                                                        :max-size="2048"
                                                                        multiple
                                                                        action="/upload_img">
                                                                    <i-button @click="page_online.commentPos = detailPos">本地上传
                                                                    </i-button>
                                                                </Upload>
                                                            </i-col>
                                                            <i-col :sm="12">
                                                                <div class="input-group">
                                                                    <input type="text" class="form-control">
                                                                    <span class="input-group-addon" @click="handleGetUrlImage($event,'introduction',detailPos)">外链图片</span>
                                                                </div>
                                                            </i-col>
                                                            <i-col :sm="{span:4,offset:1}">
                                                                <i-button @click="modifyCommentsInfoList('add',false,detailPos)">删除</i-button>
                                                            </i-col>
                                                        </Row>

                                                    </div>
                                                </div>
                                            </div>

                                            <div style="display: flex;justify-content: flex-end;align-items: center;margin-top: 10px">
                                                <i-button @click="modifyCommentsInfoList('add',true)">添加</i-button>
                                            </div>
                                        </div>

                                        <!--套餐信息-->
                                        <div class="form-group">
                                            <div>
                                                <label>套餐信息</label>
                                            </div>
                                            <div v-for="(item,pos) in page_online.combo_list" style="padding: 10px;margin-top:10px;border:1px dashed #c2c2c2;border-radius: 5px">
                                                <Row type="flex" justify="space-between" align="bottom">
                                                    <i-col span="10">
                                                        <label>套餐名</label>
                                                        <i-input v-model.trim="item.combo_name" type="text"></i-input>
                                                    </i-col>
                                                    <i-col span="10">
                                                        <label>套餐价格</label>
                                                        <i-input v-model.trim.number="item.combo_price" type="number"></i-input>
                                                    </i-col>
                                                    <i-col span="2">
                                                        <i-button @click="modifyComboList('add',false,pos)">删除</i-button>
                                                    </i-col>
                                                </Row>
                                            </div>
                                            <div  style="display: flex;justify-content: flex-end;margin-top: 10px">
                                                <i-button @click="modifyComboList('add',true)">添加</i-button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                                    <button type="button" class="btn btn-primary" @click="addPageManage">确定</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="modal fade" id="page_modify" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                         aria-hidden="true">
                        <div class="modal-dialog  modal-lg">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;
                                    </button>
                                    <h4 class="modal-title" id="">页面修改</h4>
                                </div>
                                <div class="modal-body">
                                    <form role="form">
                                        <Row type="flex" justify="space-between">
                                            <i-col span="7">
                                                <div class="form-group">
                                                    <label>链接名称</label>
                                                    <i-input class="" v-model.trim="page_modify.name" disabled
                                                           placeholder="必填，链接名称"></i-input>
                                                </div>
                                            </i-col>
                                            <i-col span="7">
                                                <div class="form-group">
                                                    <label>产品编号</label>
                                                    <i-input class="" disabled v-model.trim="page_modify.product_number"
                                                           placeholder="必填，产品编号 - ecsp0000000"></i-input>
                                                </div>
                                            </i-col>
                                            <i-col span="7">
                                                <div class="form-group">
                                                    <label>页面标题</label>
                                                    <i-input class="" v-model.trim="page_modify.title"
                                                           placeholder="必填，页面标题"></i-input>
                                                </div>
                                            </i-col>
                                        </Row>

                                        <Row type="flex" justify="space-between">

                                            <i-col span="11">
                                                <div class="form-group">
                                                    <label>产品名称</label>
                                                    <i-input class="" v-model.trim="page_modify.item_bar"
                                                           placeholder="产品编号必须在ecsp1002000 ~ ecsp1003000之间！"></i-input>
                                                </div>
                                            </i-col>
                                            <i-col span="11">
                                                <div class="form-group">
                                                    <label>折扣标语</label>
                                                    <i-input class="" v-model.trim="page_modify.discount"
                                                           placeholder="两件7折，三件5折"></i-input>
                                                </div>
                                            </i-col>
                                        </Row>

                                        <Row type="flex" justify="space-between">
                                            <i-col span="11">
                                                <div class="form-group">
                                                    <label>原价</label>
                                                    <i-input class="" v-model.trim.number="page_modify.price_old"
                                                           placeholder="必填，原价 - 1098"></i-input>
                                                </div>
                                            </i-col>
                                            <i-col span="11">
                                                <div class="form-group">
                                                    <label>促销价</label>
                                                    <i-input class="" v-model.trim.number="page_modify.price_now"
                                                           placeholder="必填，促销价 - 799"></i-input>
                                                </div>
                                            </i-col>
                                        </Row>

                                        <Row type="flex" justify="space-between">
                                            <i-col span="11">
                                                <div class="form-group">
                                                    <label>两件折扣</label>
                                                    <i-input class="" type="number" step="0.05" max="1" min="0" v-model.trim="page_modify.discount_2_price_code"
                                                           placeholder="必填，两件折扣 - 0.75"></i-input>
                                                </div>
                                            </i-col>
                                            <i-col span="11">
                                                <div class="form-group">
                                                    <label>三件以上折扣</label>
                                                    <i-input class="" type="number" step="0.05" max="1" min="0" v-model.trim="page_modify.discount_3_price_code"
                                                           placeholder="必填，三件以上折扣 - 0.5"></i-input>
                                                </div>
                                            </i-col>
                                        </Row>

                                        <!--banner图-->
                                        <div class="form-group">
                                            <label>页面banner图</label>
                                            <div>
                                                <draggable v-model="page_modify.banner_info.imgList" @start="drag=true" @end="drag=false">
                                                    <div class="demo-upload-list"
                                                         v-for="(item,index in page_modify.banner_info.imgList">
                                                        <template v-if="item.status === 'finished'">
                                                            <img :src="item.url">
                                                            <div class="demo-upload-list-cover">
                                                                <Icon v-show="index != 0" type="android-arrow-up"
                                                                      @click.native="prevImgPos(false,'banner_info',index)"></Icon>
                                                                <Icon type="ios-trash-outline"
                                                                      @click.native="modifyHandleRemoveBanner(index)"></Icon>
                                                                <Icon v-show="index != (page_modify.banner_info.imgList.length - 1)" type="android-arrow-down"
                                                                      @click.native="nextImgPos(false,'banner_info',index)"></Icon>
                                                            </div>
                                                        </template>
                                                        <template v-else>
                                                            <Progress v-if="item.showProgress" :percent="item.percentage"
                                                                      hide-info></Progress>
                                                        </template>
                                                    </div>
                                                </draggable>
                                                <div>

                                                    <Row>
                                                        <i-col :sm="4">
                                                            <Upload
                                                                    :show-upload-list="false"
                                                                    :on-success="modifyHandleSuccessBanner"
                                                                    :format="['jpg','jpeg','png','gif']"
                                                                    :max-size="2048"
                                                                    multiple
                                                                    action="/upload_img">
                                                                <i-button>本地上传</i-button>
                                                            </Upload>
                                                        </i-col>
                                                        <i-col :sm="12">
                                                            <div class="input-group">
                                                                <input type="text" class="form-control">
                                                                <span class="input-group-addon" @click="modifyHandleGetUrlImage($event,'banner')">外链图片</span>
                                                            </div>
                                                        </i-col>
                                                    </Row>

                                                </div>
                                            </div>
                                        </div>

                                        <!--详情图-->
                                        <div class="form-group">
                                            <label>页面详情图</label>
                                            <div>
                                                <draggable v-model="page_modify.detail_info.imgList" @start="drag=true" @end="drag=false">
                                                    <div class="demo-upload-list"
                                                     v-for="(item,index) in page_modify.detail_info.imgList">
                                                    <template v-if="item.status === 'finished'">
                                                        <img :src="item.url">
                                                        <div class="demo-upload-list-cover">
                                                            <Icon v-show="index != 0" type="android-arrow-up"
                                                                  @click.native="prevImgPos(false,'detail_info',index)"></Icon>
                                                            <Icon type="ios-trash-outline"
                                                                  @click.native="modifyHandleRemoveDetail(index)"></Icon>
                                                            <Icon v-show="index != (page_modify.detail_info.imgList.length - 1)" type="android-arrow-down"
                                                                  @click.native="nextImgPos(false,'detail_info',index)"></Icon>
                                                        </div>
                                                    </template>
                                                </div>
                                                </draggable>
                                                <div>

                                                    <Row>
                                                        <i-col :sm='4'>
                                                            <Upload
                                                                    :show-upload-list="false"
                                                                    :on-success="modifyHandleSuccessDetail"
                                                                    :format="['jpg','jpeg','png','gif']"
                                                                    :max-size="2048"
                                                                    action="/upload_img">
                                                                <i-button>本地上传</i-button>
                                                            </Upload>
                                                        </i-col>
                                                        <i-col :sm="12">
                                                            <div class="input-group">
                                                                <input type="text" class="form-control">
                                                                <span class="input-group-addon" @click="modifyHandleGetUrlImage($event,'detail')">外链图片</span>
                                                            </div>
                                                        </i-col>
                                                    </Row>

                                                </div>
                                            </div>
                                        </div>

                                        <!--参数图-->
                                        <div class="form-group">
                                            <label>页面参数图</label>
                                            <div>
                                                <draggable v-model="page_modify.parameter_info.imgList" @start="drag=true" @end="drag=false">
                                                    <div class="demo-upload-list"
                                                         v-for="(item,index) in page_modify.parameter_info.imgList">
                                                        <template v-if="item.status === 'finished'">
                                                            <img :src="item.url">
                                                            <div class="demo-upload-list-cover">
                                                                <Icon v-show="index != 0" type="android-arrow-up"
                                                                      @click.native="prevImgPos(false,'parameter_info',index)"></Icon>
                                                                <Icon type="ios-trash-outline"
                                                                      @click.native="modifyHandleRemoveParameter(index)"></Icon>
                                                                <Icon v-show="index != (page_modify.parameter_info.imgList.length - 1)" type="android-arrow-down"
                                                                      @click.native="nextImgPos(false,'parameter_info',index)"></Icon>
                                                            </div>
                                                        </template>
                                                    </div>
                                                </draggable>
                                                <div>

                                                    <Row>
                                                        <i-col :sm='4'>
                                                            <Upload
                                                                    :show-upload-list="false"
                                                                    :on-success="modifyHandleSuccessParameter"
                                                                    :format="['jpg','jpeg','png','gif']"
                                                                    :max-size="2048"
                                                                    action="/upload_img">
                                                                <i-button>本地上传</i-button>
                                                            </Upload>
                                                        </i-col>
                                                        <i-col :sm="12">
                                                            <div class="input-group">
                                                                <input type="text" class="form-control">
                                                                <span class="input-group-addon" @click="modifyHandleGetUrlImage($event,'parameter')">外链图片</span>
                                                            </div>
                                                        </i-col>
                                                    </Row>

                                                </div>
                                            </div>
                                        </div>

                                        <!--评论信息-->
                                        <div class="form-group">
                                            <div>
                                                <label>评论信息</label>
                                            </div>

                                            <div v-for="(item,detailPos) in page_modify.comments_info"
                                                 style="padding: 10px;margin-top:10px;border:1px dashed #c2c2c2;border-radius: 5px">

                                                <Row type="flex" justify="space-between">
                                                    <i-col span="9">
                                                        <label>用户名</label>
                                                        <i-input v-model.trim="item.user_name" type="text"
                                                                 placeholder="Enter something..."></i-input>
                                                    </i-col>
                                                    <i-col span="9">
                                                        <label>评论信息</label>
                                                        <i-input v-model.trim="item.user_comment" type="text"
                                                                 placeholder="Enter something..."></i-input>
                                                    </i-col>
                                                    <i-col span="4">
                                                        <label>好评分数</label>
                                                        <div>
                                                            <label><input type="radio" v-model.trim="item.is_best" :value="true"/> 五星</label>
                                                            <label><input type="radio" v-model.trim="item.is_best" :value="false"/> 四星半</label>
                                                        </div>
                                                    </i-col>
                                                </Row>
                                                <div style="margin-top: 10px;">

                                                    <!--<label>图片名称</label>-->
                                                    <!--<i-input v-model="line.img_title" type="text"></i-input>-->
                                                    <draggable v-model="item.imgList" @start="drag=true" @end="drag=false">
                                                        <div style="margin-top: 10px;" class="demo-upload-list"
                                                             v-for="(objImg,imgPos) in item.imgList">
                                                            <template v-if="objImg.status === 'finished'">
                                                                <img :src="objImg.url">
                                                                <div class="demo-upload-list-cover">
                                                                    <Icon v-show="imgPos != 0" type="android-arrow-up"
                                                                          @click.native="prevImgPos(false,'comments_info',imgPos,detailPos)"></Icon>
                                                                    <Icon type="ios-trash-outline"
                                                                          @click.native="modifyHandleRemoveIntroduction(detailPos,imgPos)"></Icon>
                                                                    <Icon v-show="imgPos != (item.imgList.length - 1)" type="android-arrow-down"
                                                                          @click.native="nextImgPos(false,'comments_info',imgPos,detailPos)"></Icon>
                                                                </div>
                                                            </template>
                                                        </div>
                                                    </draggable>
                                                    <div style="margin-top: 10px;">
                                                        <Row>
                                                            <i-col :sm="4">
                                                                <Upload
                                                                        :show-upload-list="false"
                                                                        :on-success="modifyHandleSuccessIntroduction"
                                                                        :format="['jpg','jpeg','png','gif']"
                                                                        :max-size="2048"
                                                                        multiple
                                                                        action="/upload_img">
                                                                    <i-button @click="page_modify.commentPos = detailPos">本地上传
                                                                    </i-button>
                                                                </Upload>
                                                            </i-col>
                                                            <i-col :sm="12">
                                                                <div class="input-group">
                                                                    <input type="text" class="form-control">
                                                                    <span class="input-group-addon" @click="modifyHandleGetUrlImage($event,'introduction',detailPos)">外链图片</span>
                                                                </div>
                                                            </i-col>
                                                            <i-col :sm="{span:4,offset:1}">
                                                                <i-button @click="modifyCommentsInfoList('modify',false,detailPos)">删除</i-button>
                                                            </i-col>
                                                        </Row>

                                                    </div>
                                                </div>
                                            </div>

                                            <div style="display: flex;justify-content: flex-end;align-items: center;margin-top: 10px">
                                                <i-button @click="modifyCommentsInfoList('modify',true)">添加</i-button>
                                            </div>
                                        </div>

                                        <!--套餐信息-->
                                        <div class="form-group">
                                            <div>
                                                <label>套餐信息</label>
                                            </div>
                                            <div v-for="(item,pos) in page_modify.combo_list" style="padding: 10px;margin-top:10px;border:1px dashed #c2c2c2;border-radius: 5px">
                                                <Row type="flex" justify="space-between" align="bottom">
                                                    <i-col span="10">
                                                        <label>套餐名</label>
                                                        <i-input v-model.trim="item.combo_name" type="text"></i-input>
                                                    </i-col>
                                                    <i-col span="10">
                                                        <label>套餐价格</label>
                                                        <i-input v-model.trim.number="item.combo_price" type="number"></i-input>
                                                    </i-col>
                                                    <i-col span="2">
                                                        <i-button @click="modifyComboList('modify',false,pos)">删除</i-button>
                                                    </i-col>
                                                </Row>
                                            </div>
                                            <div  style="display: flex;justify-content: flex-end;margin-top: 10px">
                                                <i-button @click="modifyComboList('modify',true)">添加</i-button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                                    <button type="button" class="btn btn-primary" @click="modifyPageManage">确定</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <footer><p>Copyright &copy; 2018 MagicHygeia All rights reserved.</p></footer>
                </main>
            </div>
        </div>
    </div>
</div>
</body>
{% include "./include/foot.html" %}
<script src="/static/manage/layer/laydate.js"></script>
<script src="/static/manage/js/Sortable.min.js"></script>
<script src="/static/manage/js/vuedraggable.min.js"></script>
<script src="/static/manage/js/common/page_manage.js"></script>
</html>

